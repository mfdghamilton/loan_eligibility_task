<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Loan Eligibility</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 40px;
      }
      table {
        border-collapse: collapse;
        width: 50%;
      }
      td {
        padding: 8px;
      }
      input,
      select {
        width: 100%;
        padding: 6px;
      }
      button {
        padding: 10px 20px;
        margin-top: 10px;
        font-size: 16px;
        cursor: pointer;
      }
      #result {
        margin-top: 20px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h2>Loan Application Prediction</h2>
    <form id="loanForm">
      <table>
        <tr>
          <td><label for="loan_amount">Loan Amount:</label></td>
          <td><input type="number" id="loan_amount" required /></td>
        </tr>
        <tr>
          <td><label for="applicant_income">Income:</label></td>
          <td><input type="number" id="applicant_income" required /></td>
        </tr>
        <tr>
          <td><label for="coapplicant_income">2nd Income:</label></td>
          <td><input type="number" id="coapplicant_income" required /></td>
        </tr>
        <tr>
          <td><label for="loan_term">Loan Term:</label></td>
          <td><input type="number" id="loan_term" required /></td>
        </tr>
          <td><label for="age">Age:</label></td>
          <td><input type="number" id="age" required /></td>
        </tr>
        <tr>
          <td><label for="employment_type">Employment Type:</label></td>
          <td>
            <select id="employment_type" required>
              <option value="0">Unemployed</option>
              <option value="1">Self-Employed</option>
              <option value="2">Salaried</option>
            </select>
          </td>
        </tr>
        <tr>
          <td><label for="education">Employment Type:</label></td>
          <td>
            <select id="education" required>
              <option value="0">Not Graduate</option>
              <option value="1">Graduate</option>
            </select>
          </td>
        </tr>
        <tr>
          <td><label for="married">Married:</label></td>
          <td>
            <select id="married" required>
              <option value="0">No</option>
              <option value="1">Yes</option>
            </select>
          </td>
        </tr>
        <tr>
          <td><label for="property_area">Property Area:</label></td>
          <td>
            <select id="property_area" required>
              <option value="0">Rural</option>
              <option value="1">Semiurban</option>
              <option value="2">Urban</option>
            </select>
          </td>
        </tr>
      </table>

      <button type="submit">Check Application</button>
    </form>

    <p id="result"></p>

    <script>
      document
        .getElementById("loanForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const loan_amount = document.getElementById("loan_amount").value;
          const applicant_income = document.getElementById("applicant_income").value;
          const coapplicant_income = document.getElementById("coapplicant_income").value;
          const loan_term = document.getElementById("loan_term").value;
          const age = document.getElementById("age").value;
          const employment_type = document.getElementById("employment_type").value;
          const education = document.getElementById("education").value;
          const married = document.getElementById("married").value;
          const property_area = document.getElementById("property_area").value;

          const response = await fetch("/predict", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ loan_amount, applicant_income, coapplicant_income, loan_term, age, employment_type, education, married, property_area }),
          });

          const result = await response.json();
          document.getElementById(
            "result"
          ).innerText = `Chance of Loan: ${result.loan_prediction} (Probability: ${result.loan_probability})`; 
        });
    </script>
  </body>
</html>
